{% extends "base_advanced_layout.html" %}
{%block title%} Aggregate {%endblock%}


{%block body%}
<div class="container-fluid search-mini-body">
    <div class="row">
        <div class="col-xs-3 col-xs-offset-1">
        <form class="form" action="/advanced" method="get" role="form">



                <div class="row">


                    <div class="panel panel-default">

  <div class="panel-heading">Aggregate</div>

  <div class="panel-body">
                     <div class="form-group">
    <label for="inputCollection">Collection</label>
                    <select name="colleciton" id="collection" class="form-control input-lg">
                          {% for label in collections %}
                          <option>{{label}}</option>
                                {% endfor %}
                    </select>
                </div>

                    <button class="btn btn-primary btn-lg btn-block" id="button1id">Aggregate</button>

                </div>
                </div>
                    </div>
            <div class="row">

                     <div class="form-group">
    <label for="firstCommand">First Command</label>

                <textarea class="form-control" id="firstCommand"  name="firstCommand"  rows="6"></textarea>
                         </div>

                </div>
            <div class="row">
                <div class="form-group">
    <label for="secondCommand">Second Command</label>

                <textarea class="form-control" id="secondCommand" rows="6"  name="secondCommand"></textarea>
                         </div>

                </div>

            </form>
        </div>

        <!--
<div class="col-sm-2 col-sm-offset-1">
<ul class="nav nav-pills nav-stacked">
        <li class="active"><a href="#">Home</a></li>
<li><a href="#">Profile</a></li>
<li><a href="#">Messages</a></li>
    </ul>
    </div>

    -->


        {% if results and raw_results %}

        <div class="col-lg-6">

            <ul class="nav nav-tabs">
                <li class="active"><a href="#home" data-toggle="tab">Table</a></li>
                <li><a href="#json-raw" data-toggle="tab">JSON</a></li>

                <li><a href="#csv-raw" data-toggle="tab">CSV</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="home">


                    <table class="table table-hover">
                        <thead>
                        <tr>
                            {% for field in headers %}
                            <th>{{field}}</th>
                            {% endfor %}
                        </tr>
                        </thead>

                        <thead>

                        {% for document in results %}
                        <tr>

                            {% for field in document %}
                            <th>{{document[field]}}</th>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </table>
                </div>

                <div class="tab-pane" id="json-raw">
                            <pre class="prettyprint">
                                    {{raw_results}}
                            </pre>

                </div>
            </div>
        </div>
        <!-- /col-lg-8 -->
        {% endif %}
    </div>
    <!-- /row -->
</div> <!-- /container -->


{%endblock%}
{%block footer%}
{%endblock%}